Сборка докер образа 1С + PostgreSQL
===================================

## Инструкция
В папку **distr** разместить файлы дистрибутивов (DEB) для 1С и СУБД. Например:
* deb64_8_3_18_1661.tar.gz
* postgresql_12.7_5.1C_amd64_deb.tar.bz2

Выполнить команду `docker build` указав необходимые аргументы:
* SRV1C_VERSION - версия 1С
* POSTGRES_VERSION - версия СУБД PostgreSQL

Например:
```shell 
docker build -t docker1c --build-arg SRV1C_VERSION=8.3.18.1661 --build-arg POSTGRES_VERSION=12.7.5.1C .
```

Полученный образ можно запустить командой (например):
```shell
docker run -d --rm --name docker1c-run -p 1540:1540 -p 1541:1541 -p 1550:1550 -p 1560-1591:1560-1591 -p 5432:5432 docker1c-1c
```

## Описание сборки
Сборка строится на базе образа Ubuntu:18.04.
Дистрибутивы из каталога **distr** копируются в каталог *$DISTR_DIR*. Скрипты **entrypoint.sh** и **deployer.sh** размещаются в */usr/src/deploy1c/*:
* **deployer.sh** - служит для распаковки архивов и устанвки 1С и postgres в момент пострения образа. Все дистрибутивы удаляются из образа после установки.
* **entrypoint.sh** - запускается postgres и 1С в момент запуска контейнера.

